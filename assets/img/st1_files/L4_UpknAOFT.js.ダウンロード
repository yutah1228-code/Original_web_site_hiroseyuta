;/*FB_PKG_DELIM*/

__d("useIGDTypingIndicatorSubscription_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9712315318850438"}),null);
__d("useIGDTypingIndicatorSubscription.graphql",["useIGDTypingIndicatorSubscription_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input_data"}],c=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input_data"}],concreteType:"XDTDirectRealtimeEventResponse",kind:"LinkedField",name:"xdt_direct_realtime_event",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"event",storageKey:null},{alias:null,args:null,concreteType:"XDTDirectRealtimeOperation",kind:"LinkedField",name:"data",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"op",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useIGDTypingIndicatorSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useIGDTypingIndicatorSubscription",selections:c},params:{id:b("useIGDTypingIndicatorSubscription_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_direct_realtime_event"],subscriptionName:"xdt_direct_realtime_event"},name:"useIGDTypingIndicatorSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("useIGDTypingIndicator",["FBLogger","IGDTypingIndicatorUtils","PolarisConfig","react","react-compiler-runtime","react-relay","useIGDTypingIndicatorSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;var j=h!==void 0?h:h=b("useIGDTypingIndicatorSubscription.graphql");function a(a){var b=d("react-compiler-runtime").c(6);if(b[0]===Symbol["for"]("react.memo_cache_sentinel")){var c;c=(c=d("PolarisConfig").getViewerId())!=null?c:"";b[0]=c}else c=b[0];c=c;var e;b[1]!==a?(e=function(b){if(b!=null){b=d("IGDTypingIndicatorUtils").transformIGDTypingPayload(b);b!=null&&a(b)}},b[1]=a,b[2]=e):e=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(c={input_data:{user_id:c}},b[3]=c):c=b[3];b[4]!==e?(c={onError:k,onNext:e,subscription:j,variables:c},b[4]=e,b[5]=c):c=b[5];e=c;b=e;d("react-relay").useSubscription(b)}function k(a){c("FBLogger")("igd_web").catching(a).warn("IGD typing indicator: Error with subscription setup")}g["default"]=a}),98);
__d("IGDTypingIndicatorProvider.react",["IGDTypingIndicatorContext","IGDTypingIndicatorUtils","ReQL","ReQLSuspense","clearInterval","react","react-compiler-runtime","setInterval","useIGDTypingIndicator","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=["senderIgId","threadIgId"],i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect;b.useMemo;var m=b.useRef,n=b.useState;function a(a){var b=d("react-compiler-runtime").c(25);a=a.children;var e=(i||(i=c("useReStore")))(),g=n(),j=g[0],o=g[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=[],b[0]=g):g=b[0];g=n(g);var p=g[0],q=g[1];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=[],b[1]=g):g=b[1];g=n(g);var r=g[0],s=g[1],t=m(null),u=d("IGDTypingIndicatorUtils").useThreadIdFromIGId(e,j==null?void 0:j.threadIgId),v=d("IGDTypingIndicatorUtils").useContactIdFromSenderIGId(e,j==null?void 0:j.senderIgId),w;b[2]!==e.tables.messages||b[3]!==p?(g=function(){return d("ReQL").fromTableDescending(e.tables.messages).filter(function(a){var b=p.some(function(b){return d("IGDTypingIndicatorUtils").isNewMessageAfterTypingEvent(b,a)});return b})},w=[p,e.tables.messages],b[2]=e.tables.messages,b[3]=p,b[4]=g,b[5]=w):(g=b[4],w=b[5]);var x=d("ReQLSuspense").useArray(g,w,f.id+":56");b[6]!==x||b[7]!==p?(g=function(){var a=p.filter(function(a){return!x.some(function(b){return d("IGDTypingIndicatorUtils").isNewMessageAfterTypingEvent(a,b)})});s(function(){return a})},w=[p,x],b[6]=x,b[7]=p,b[8]=g,b[9]=w):(g=b[8],w=b[9]);l(g,w);b[10]!==j||b[11]!==v||b[12]!==u?(g=function(){if(j&&u!=null&&v!=null){j.senderIgId;j.threadIgId;var a=babelHelpers.objectWithoutPropertiesLoose(j,h),b=babelHelpers["extends"]({},a,{senderId:v,threadKey:u});q(function(a){if(b.activityStatus===d("IGDTypingIndicatorUtils").IGDTypingStatus.STOPPED_TYPING)return a.filter(function(a){return!d("IGDTypingIndicatorUtils").shouldTypingEventStop(a,b)});var c=a.findIndex(function(a){return d("IGDTypingIndicatorUtils").isSameThreadSenderEvent(a,b)});return c===-1?[].concat(a,[b]):a.map(function(a,d){return d===c?babelHelpers["extends"]({},a,{timestamp:b.timestamp}):a})})}},w=[j,v,u],b[10]=j,b[11]=v,b[12]=u,b[13]=g,b[14]=w):(g=b[13],w=b[14]);l(g,w);b[15]!==p.length?(g=function(){p.length>0?t.current=c("setInterval")(function(){var a=Date.now();q(function(b){return b.filter(function(b){return b.timestamp+d("IGDTypingIndicatorUtils").IGD_WEB_TYPING_INDICATOR_TTL>a})})},d("IGDTypingIndicatorUtils").ONE_SECOND_IN_MILLISECONDS):p.length===0&&t.current!=null&&(c("clearInterval")(t.current),t.current=null);return function(){t.current&&(c("clearInterval")(t.current),t.current=null)}},w=[p.length],b[15]=p.length,b[16]=w,b[17]=g):(w=b[16],g=b[17]);l(g,w);b[18]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){o(a)},b[18]=g):g=b[18];w=g;c("useIGDTypingIndicator")(w);b[19]===Symbol["for"]("react.memo_cache_sentinel")?(g=[],b[19]=g):g=b[19];w=g;b[20]!==r?(g={typingEvents:r,typingEventsWithIgId:w},b[20]=r,b[21]=g):g=b[21];w=g;r=w;b[22]!==a||b[23]!==r?(g=k.jsx(c("IGDTypingIndicatorContext").Provider,{value:r,children:a}),b[22]=a,b[23]=r,b[24]=g):g=b[24];return g}g["default"]=a}),98);